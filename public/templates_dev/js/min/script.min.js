var SITE_URL=$("body").attr("data-site-url"),app={init:function(){app.search(),app.event.deleteBtn(),app.event.showBtn(),app.event.hideBtn()},search:function(){$("#search").submit(function(){var a=$(this).serialize();return $.ajax({url:SITE_URL+"admin/get-data-instagram",type:"GET",dataType:"json",data:a}).done(function(a){app.contentInstagram(a),app.event.addBtn(),app.event.getMoreBtnInstagram()}).fail(function(){console.log("error")}),!1})},addData:function(a){var e=a.attr("data-id");$.ajax({url:SITE_URL+"admin/add-data",dataType:"json",type:"POST",data:{id:e}}).done(function(e){a.parent().remove(),app.flashMessages("success","Se ha agregado un elemento correctamente con ID: "+e+".")}).fail(function(){app.flashMessages("danger","Ha ocurrido un error en guardar el elemento.")})},deleteData:function(a){var e=a.attr("data-id");$.ajax({url:SITE_URL+"admin/delete-data",dataType:"json",type:"POST",data:{id:e}}).done(function(t){t?(a.parents("tr").remove(),app.flashMessages("success","Se ha borrado el elemento con ID: "+e+" correctamente.")):app.flashMessages("danger","Ha ocurrido un problema en eliminar el elemento con "+e+".")}).fail(function(){return!1})},showData:function(a){var e=a.attr("data-id");$.ajax({url:SITE_URL+"admin/show-data",dataType:"json",type:"POST",data:{id:e}}).done(function(t){t?(a.removeClass("visible-*-inline-block").addClass("hidden"),a.siblings(".btn-hide").removeClass("hidden").addClass("visible-*-inline-block"),app.flashMessages("success","El elemento con ID: "+e+" ya es visible.")):app.flashMessages("danger","Ha ocurrido un problema en la visibilidad del elemento con ID: "+e+".")}).fail(function(){return!1})},hideData:function(a){var e=a.attr("data-id");$.ajax({url:SITE_URL+"admin/hide-data",dataType:"json",type:"POST",data:{id:e}}).done(function(t){t?(a.removeClass("visible-*-inline-block").addClass("hidden"),a.siblings(".btn-show").removeClass("hidden").addClass("visible-*-inline-block"),app.flashMessages("success","El elemento con ID: "+e+" ya no es visible.")):app.flashMessages("danger","Ha ocurrido un problema en la visibilidad del elemento con ID: "+e+".")}).fail(function(){return!1})},flashMessages:function(a,e){$(".messages").empty().html('<p class="bg-'+a+'">'+e+"</p>")},contentInstagram:function(a){html="",$.each(a.data,function(a,e){html+='<div class="col-xs-6 col-sm-3 placeholder c_'+e.id+'">',html+='<a data-id="'+e.id+'" class="btn btn-success add-btn" href="http://google.cl" role="button">Agregar</a>',html+='<img src="'+e.images.low_resolution.url+'" class="img-responsive" alt="Generic placeholder thumbnail">',html+="<h4>"+e.user.username+"</h4>",console.log(e.caption.length),html+='<span class="text-muted">'+e.caption.text+"</span>",html+="</div>"}),$(".object_instagram").empty().prepend(html),$(".get-more").removeClass("hide").find("a").attr("last-url",a.pagination.next_url)}};app.event={},app.event={addBtn:function(){$(".add-btn").click(function(a){a.preventDefault();var e=$(this);app.addData(e)})},getMoreDataInstagram:function(){},deleteBtn:function(){$(".btn-delete").click(function(a){a.preventDefault();var e=$(this);app.deleteData(e)})},showBtn:function(){$(".btn-show").click(function(a){a.preventDefault();var e=$(this);app.showData(e)})},hideBtn:function(){$(".btn-hide").click(function(a){a.preventDefault();var e=$(this);app.hideData(e)})},getMoreBtnInstagram:function(){$(".get-more-btn").click(function(a){a.preventDefault();var e=$(this);$.ajax({url:e.attr("last-url"),dataType:"json"}).done(function(a){app.contentInstagram(a)}).fail(function(){app.flashMessages("warning","Ha ocurrido un error en traer la data de instagram.")})})}},$(document).ready(function(){app.init()});